{"ast":null,"code":"import _slicedToArray from\"C:/Users/ddima/OneDrive/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/course/beetroot-academy/Loshkovetska/cinema-park/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Exit,Search}from\"../Svg/Svg\";import\"../SearchModal/SearchModal.scss\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function SearchModal(props){var _useState=useState(),_useState2=_slicedToArray(_useState,2),searchRes=_useState2[0],setResult=_useState2[1];function changeModalState(){props.changeState();}useEffect(function(){if(props.isOpen){document.body.style.overflow=\"hidden\";document.querySelector(\".navigation\").classList.add(\"navigation--hidden\");}else{document.body.style.overflow=\"auto\";document.querySelector(\".navigation\").classList.remove(\"navigation--hidden\");}});function handlerChange(e){var inputValue=e.target.value;var url=\"http://www.omdbapi.com/?apikey=d3ff230f&s=\".concat(inputValue);getMovies(url);}function getMovies(url){fetch(url).then(function(response){if(response.ok){return response.json();}else throw new Error(\"HTTP status \"+response.status+\" \"+response.statusText);},function(reject){throw new Error(reject);}).then(function(result){getPosts(result.Search);}).catch(function(e){if(e.message==='TypeError: Failed to fetch'){alert(\"Something's gone wrong\");}});}function getPosts(data){var finalData=data.filter(function(movie){return movie.Poster!==\"N/A\";});setResult(/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"search__count\",children:[\"\\u0420\\u0435\\u0437\\u0443\\u043B\\u044C\\u0442\\u0430\\u0442\\u0456\\u0432 \\u0437\\u043D\\u0430\\u0439\\u0434\\u0435\\u043D\\u043E \",finalData.length]}),/*#__PURE__*/_jsx(\"div\",{className:\"posts\",children:finalData.map(function(movie,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"post\",children:[/*#__PURE__*/_jsx(\"img\",{src:movie.Poster,alt:\"img\",className:\"img-poster\"}),/*#__PURE__*/_jsx(\"span\",{className:\"post__title\",children:movie.Title})]},index);})})]}));}return/*#__PURE__*/_jsx(\"section\",{className:\"search\"+(props.isOpen?\" search--open\":\"\"),children:/*#__PURE__*/_jsxs(\"div\",{className:\"search__container\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"search__exit\",onClick:changeModalState,children:/*#__PURE__*/_jsx(Exit,{className:\"exit-svg\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"search__input\",children:[/*#__PURE__*/_jsx(Search,{className:\"header__svg\"}),/*#__PURE__*/_jsx(\"input\",{className:\"input input--search\",onChange:handlerChange})]}),/*#__PURE__*/_jsx(\"div\",{className:\"search__output\",children:searchRes})]})});}","map":{"version":3,"sources":["C:/Users/ddima/OneDrive/Рабочий стол/course/beetroot-academy/Loshkovetska/cinema-park/src/components/SearchModal/SearchModal.js"],"names":["React","useState","useEffect","Exit","Search","SearchModal","props","searchRes","setResult","changeModalState","changeState","isOpen","document","body","style","overflow","querySelector","classList","add","remove","handlerChange","e","inputValue","target","value","url","getMovies","fetch","then","response","ok","json","Error","status","statusText","reject","result","getPosts","catch","message","alert","data","finalData","filter","movie","Poster","length","map","index","Title"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Exit, Search } from \"../Svg/Svg\";\r\n\r\nimport \"../SearchModal/SearchModal.scss\";\r\n\r\nexport default function SearchModal(props) {\r\n    const [searchRes, setResult] = useState();\r\n\r\n    function changeModalState() {\r\n        props.changeState();\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (props.isOpen) {\r\n            document.body.style.overflow = \"hidden\";\r\n            document.querySelector(\".navigation\").classList.add(\"navigation--hidden\");\r\n        }\r\n        else {\r\n            document.body.style.overflow = \"auto\";\r\n            document.querySelector(\".navigation\").classList.remove(\"navigation--hidden\");\r\n        }\r\n    });\r\n\r\n    function handlerChange(e) {\r\n        const inputValue = e.target.value;\r\n\r\n        let url = `http://www.omdbapi.com/?apikey=d3ff230f&s=${inputValue}`;\r\n\r\n        getMovies(url);\r\n    }\r\n\r\n    function getMovies(url) {\r\n        fetch(url)\r\n            .then(\r\n                response => {\r\n                    if (response.ok) {\r\n                        return response.json();\r\n                    }\r\n                    else throw new Error(\"HTTP status \" + response.status + \" \" + response.statusText);\r\n                },\r\n                reject => {\r\n                    throw new Error(reject);\r\n                })\r\n            .then(result => {\r\n                getPosts(result.Search);\r\n            }).catch(e => {\r\n                if (e.message === 'TypeError: Failed to fetch') {\r\n                    alert(\"Something's gone wrong\");\r\n                }\r\n            });\r\n    }\r\n\r\n    function getPosts(data) {\r\n        const finalData = data.filter(movie => movie.Poster !== \"N/A\");\r\n\r\n        setResult(\r\n            <>\r\n                <div className=\"search__count\">Результатів знайдено {finalData.length}</div>\r\n                <div className=\"posts\">\r\n                    {finalData.map((movie, index) => (\r\n                        <div className=\"post\" key={index} >\r\n                            <img src={movie.Poster} alt=\"img\" className=\"img-poster\" />\r\n                            <span className=\"post__title\">{movie.Title}</span>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n\r\n            </>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <section className={\"search\" + (props.isOpen ? \" search--open\" : \"\")}>\r\n            <div className=\"search__container\">\r\n                <button className=\"search__exit\" onClick={changeModalState}>\r\n                    <Exit className={\"exit-svg\"} />\r\n                </button>\r\n                <div className=\"search__input\">\r\n                    <Search className={\"header__svg\"} />\r\n                    <input className=\"input input--search\" onChange={handlerChange} />\r\n                </div>\r\n                <div className=\"search__output\">\r\n                    {searchRes}\r\n                </div>\r\n            </div>\r\n        </section>\r\n    );\r\n}"]},"metadata":{},"sourceType":"module"}