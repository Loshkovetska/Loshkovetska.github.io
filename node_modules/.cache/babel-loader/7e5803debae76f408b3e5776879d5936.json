{"ast":null,"code":"import _toConsumableArray from\"C:/Users/ddima/OneDrive/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/course/beetroot-academy/Loshkovetska/cinema-park/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"C:/Users/ddima/OneDrive/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/course/beetroot-academy/Loshkovetska/cinema-park/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _classCallCheck from\"C:/Users/ddima/OneDrive/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/course/beetroot-academy/Loshkovetska/cinema-park/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/ddima/OneDrive/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/course/beetroot-academy/Loshkovetska/cinema-park/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"C:/Users/ddima/OneDrive/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/course/beetroot-academy/Loshkovetska/cinema-park/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/ddima/OneDrive/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/course/beetroot-academy/Loshkovetska/cinema-park/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{useEffect,useState}from\"react\";import{Exit,NextStep}from\"../Svg/Svg\";import\"./StoreModal.scss\";import{seatsVariants}from\"../../mockData/seats\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var StoreModal=/*#__PURE__*/function(_React$Component){_inherits(StoreModal,_React$Component);var _super=_createSuper(StoreModal);function StoreModal(props){var _this;_classCallCheck(this,StoreModal);_this=_super.call(this,props);_this.state={isResized:false};_this.fullDate=_this.props.dateTime[0];_this.time=props.dateTime[1];return _this;}_createClass(StoreModal,[{key:\"componentDidUpdate\",value:function componentDidUpdate(){if(this.state.isResized){document.querySelector(\".navigation\").classList.add(\"navigation--hidden\");}else{document.querySelector(\".navigation\").classList.remove(\"navigation--hidden\");}}},{key:\"resizeModal\",value:function resizeModal(){this.setState({isResized:this.state.isResized?false:true});}},{key:\"getTypeOfSeat\",value:function getTypeOfSeat(type){if(!type)return;var _seatsVariants$filter=seatsVariants.filter(function(seat){return seat.title===type;}),_seatsVariants$filter2=_slicedToArray(_seatsVariants$filter,1),seat=_seatsVariants$filter2[0];return seat.icon;}},{key:\"getPriceOfSeat\",value:function getPriceOfSeat(type){if(!type)return;var _seatsVariants$filter3=seatsVariants.filter(function(seat){return seat.title===type;}),_seatsVariants$filter4=_slicedToArray(_seatsVariants$filter3,1),seat=_seatsVariants$filter4[0];return seat.price;}},{key:\"getTotalTicketPrice\",value:function getTotalTicketPrice(tickets){var _this2=this;var total=0;tickets.forEach(function(ticket){total+=_this2.getPriceOfSeat(ticket.type);});return total;}},{key:\"getPriceBySize\",value:function getPriceBySize(size){return size===\"M\"?30:size===\"L\"?40:0;}},{key:\"getTotalProductsPrice\",value:function getTotalProductsPrice(products){var _this3=this;var total=0;_toConsumableArray(products).forEach(function(product){total+=(product.price+_this3.getPriceBySize(product.size))*product.count;});return total;}},{key:\"getTotalCount\",value:function getTotalCount(tickets,products){return this.getTotalTicketPrice(tickets)+this.getTotalProductsPrice(products);}},{key:\"changeTab\",value:function changeTab(){var tab=this.props.currentTab;this.props.openTab(tab+1);}},{key:\"deleteTicket\",value:function deleteTicket(e){var id=e.currentTarget.dataset.idrow;var tickets=this.props.tickets;tickets.splice(id,1);this.props.updateTickets(tickets);}},{key:\"deleteProduct\",value:function deleteProduct(e){var id=e.currentTarget.dataset.idrow;var products=this.props.products;products.delete(_toConsumableArray(this.props.products)[id]);this.props.updateProducts(products);}},{key:\"getTicketsList\",value:function getTicketsList(tickets){var _this4=this;return tickets.map(function(ticket,index){return/*#__PURE__*/_jsxs(\"tr\",{className:\"tickets-table__row\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"tickets-table__col\",children:_this4.getTypeOfSeat(ticket.type)}),/*#__PURE__*/_jsx(\"td\",{className:\"tickets-table__col\",children:ticket.row}),/*#__PURE__*/_jsx(\"td\",{className:\"tickets-table__col\",children:ticket.seat}),/*#__PURE__*/_jsx(\"td\",{className:\"tickets-table__col\",children:_this4.fullDate}),/*#__PURE__*/_jsx(\"td\",{className:\"tickets-table__col\",children:_this4.time}),/*#__PURE__*/_jsx(\"td\",{className:\"tickets-table__col\",children:_this4.getPriceOfSeat(ticket.type)}),/*#__PURE__*/_jsx(\"td\",{className:\"tickets-table__col\",children:/*#__PURE__*/_jsx(\"button\",{className:\"tickets-table__button\",\"data-idrow\":index,onClick:_this4.deleteTicket.bind(_this4),children:/*#__PURE__*/_jsx(Exit,{className:\"table-delete\"})})})]},index);});}},{key:\"getProductsList\",value:function getProductsList(products){var _this5=this;return _toConsumableArray(products).map(function(product,index){return/*#__PURE__*/_jsxs(\"tr\",{className:\"market-table__row\",children:[/*#__PURE__*/_jsxs(\"td\",{className:\"market-table__col\",children:[/*#__PURE__*/_jsx(\"img\",{src:product.img,alt:\"img\",className:\"market-img\"}),\" \"]}),/*#__PURE__*/_jsx(\"td\",{className:\"market-table__col\",children:product.title}),/*#__PURE__*/_jsx(\"td\",{className:\"market-table__col\",children:product.count}),/*#__PURE__*/_jsx(\"td\",{className:\"market-table__col\",children:product.size}),/*#__PURE__*/_jsx(\"td\",{className:\"market-table__col\",children:product.price}),/*#__PURE__*/_jsx(\"td\",{className:\"market-table__col\",children:/*#__PURE__*/_jsx(\"button\",{className:\"market-table__button\",\"data-idrow\":index,onClick:_this5.deleteProduct.bind(_this5),children:/*#__PURE__*/_jsx(Exit,{className:\"table-delete\"})})})]},index);});}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"section\",{className:\"pop-up-store\"+(this.props.show?\" pop-up-store--show\":\"\")+(this.state.isResized?\" pop-up-store--resize\":\"\")+(this.props.currentTab===3?\" pop-up-store--open\":\"\"),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pop-up-store__content\"+(this.state.isResized?\" pop-up-store__content--show\":\"\"),children:[/*#__PURE__*/_jsx(\"button\",{className:\"pop-up-store__button\",onClick:this.resizeModal.bind(this),children:/*#__PURE__*/_jsx(Exit,{className:\"modal-exit\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"pop-up-store__title\",children:\"\\u0412\\u0430\\u0448\\u0435 \\u0437\\u0430\\u043C\\u043E\\u0432\\u043B\\u0435\\u043D\\u043D\\u044F\"}),/*#__PURE__*/_jsxs(\"section\",{className:\"pop-up-store__tickets tickets-sect\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"tickets-sect__top\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"tickets-sect__title\",children:\"\\u041A\\u0432\\u0438\\u0442\\u043A\\u0438\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"tickets-sect__price\",children:[this.props.tickets.length,\"\\u0448\\u0442, \",this.getTotalTicketPrice(this.props.tickets),\"\\u0433\\u0440\\u043D\"]})]}),/*#__PURE__*/_jsxs(\"table\",{className:\"tickets-sect__table tickets-table\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"tickets-table__thead\",children:/*#__PURE__*/_jsxs(\"tr\",{className:\"tickets-table__thead-row\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"tickets-table__thead-col\",children:\"\\u0422\\u0438\\u043F\"}),/*#__PURE__*/_jsx(\"th\",{className:\"tickets-table__thead-col\",children:\"\\u0420\\u044F\\u0434\"}),/*#__PURE__*/_jsx(\"th\",{className:\"tickets-table__thead-col\",children:\"\\u041C\\u0456\\u0441\\u0446\\u0435\"}),/*#__PURE__*/_jsx(\"th\",{className:\"tickets-table__thead-col\",children:\"\\u0414\\u0430\\u0442\\u0430\"}),/*#__PURE__*/_jsx(\"th\",{className:\"tickets-table__thead-col\",children:\"\\u0427\\u0430\\u0441\"}),/*#__PURE__*/_jsx(\"th\",{className:\"tickets-table__thead-col\",children:\"\\u0412\\u0430\\u0440\\u0442\\u0456\\u0441\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"th\",{className:\"tickets-table__thead-col\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"tickets-table__rows\",children:this.getTicketsList(this.props.tickets)})]})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"pop-up-store__tickets market-sect\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"market-sect__top\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"market-sect__title\",children:\"\\u041A\\u0456\\u043D\\u043E\\u043C\\u0430\\u0440\\u043A\\u0435\\u0442\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"market-sect__price\",children:[this.props.products.size||0,\"\\u0448\\u0442, \",this.getTotalProductsPrice(this.props.products),\"\\u0433\\u0440\\u043D\"]})]}),/*#__PURE__*/_jsxs(\"table\",{className:\"market-sect__table market-table\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"market-table__thead\",children:/*#__PURE__*/_jsxs(\"tr\",{className:\"tickets-table__thead-row\",children:[/*#__PURE__*/_jsx(\"th\",{className:\"market-table__thead-col\",children:\"\\u0417\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u043D\\u044F\"}),/*#__PURE__*/_jsx(\"th\",{className:\"market-table__thead-col\",children:\"\\u041D\\u0430\\u0437\\u0432\\u0430\"}),/*#__PURE__*/_jsx(\"th\",{className:\"market-table__thead-col\",children:\"\\u041A\\u0456\\u043B\\u044C\\u043A\\u0456\\u0441\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"th\",{className:\"market-table__thead-col\",children:\"\\u041E\\u0431\\u0454\\u043C\"}),/*#__PURE__*/_jsx(\"th\",{className:\"market-table__thead-col\",children:\"\\u0412\\u0430\\u0440\\u0442\\u0456\\u0441\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"th\",{className:\"market-table__thead-col\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"market-table__rows\",children:this.getProductsList(this.props.products)})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pop-up-store__bottom\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"pop-up-store__resize-button\"+!this.state.isResized?\" pop-up-store__resize-button--show\":\"\",onClick:this.resizeModal.bind(this),children:/*#__PURE__*/_jsx(NextStep,{class:\"pop-arrow-up\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"pop-up-store__general-price\",children:[\"\\u0412\\u0441\\u044C\\u043E\\u0433\\u043E: \",this.getTotalCount(this.props.tickets,this.props.products),\" \\u0433\\u0440\\u043D\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pop-up-store__count\"+(!this.state.isResized?\" pop-up-store__count--show\":\"\"),children:[\"\\u041A\\u0432\\u0438\\u0442\\u043A\\u0438: \",this.props.tickets.length,\"x\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pop-up-store__count\"+(!this.state.isResized?\" pop-up-store__count--show\":\"\"),children:[\"\\u041A\\u0456\\u043D\\u043E\\u043C\\u0430\\u0440\\u043A\\u0435\\u0442: \",_toConsumableArray(this.props.products).length,\"x\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"button-next\",type:\"submit\",onClick:this.changeTab.bind(this),children:[/*#__PURE__*/_jsx(\"span\",{className:\"button-text\",children:\"\\u041F\\u0440\\u043E\\u0434\\u043E\\u0432\\u0436\\u0438\\u0442\\u0438\"}),/*#__PURE__*/_jsx(NextStep,{})]})]})]});}}]);return StoreModal;}(React.Component);export{StoreModal as default};","map":{"version":3,"sources":["C:/Users/ddima/OneDrive/Рабочий стол/course/beetroot-academy/Loshkovetska/cinema-park/src/components/StoreModal/StoreModal.js"],"names":["React","useEffect","useState","Exit","NextStep","seatsVariants","StoreModal","props","state","isResized","fullDate","dateTime","time","document","querySelector","classList","add","remove","setState","type","filter","seat","title","icon","price","tickets","total","forEach","ticket","getPriceOfSeat","size","products","product","getPriceBySize","count","getTotalTicketPrice","getTotalProductsPrice","tab","currentTab","openTab","e","id","currentTarget","dataset","idrow","splice","updateTickets","delete","updateProducts","map","index","getTypeOfSeat","row","deleteTicket","bind","img","deleteProduct","show","resizeModal","length","getTicketsList","getProductsList","getTotalCount","changeTab","Component"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Exit, NextStep } from \"../Svg/Svg\";\r\nimport \"./StoreModal.scss\";\r\nimport { seatsVariants } from \"../../mockData/seats\";\r\n\r\nexport default class StoreModal extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = { isResized: false };\r\n        this.fullDate = this.props.dateTime[0];\r\n        this.time = props.dateTime[1];\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        if (this.state.isResized) {\r\n            document.querySelector(\".navigation\").classList.add(\"navigation--hidden\");\r\n        }\r\n        else {\r\n            document.querySelector(\".navigation\").classList.remove(\"navigation--hidden\");\r\n        }\r\n    }\r\n\r\n    resizeModal() {\r\n        this.setState({ isResized: this.state.isResized ? false : true });\r\n    }\r\n\r\n    getTypeOfSeat(type) {\r\n        if (!type) return;\r\n        const [seat] = seatsVariants.filter(seat => seat.title === type);\r\n        return seat.icon;\r\n    }\r\n\r\n    getPriceOfSeat(type) {\r\n        if (!type) return;\r\n        const [seat] = seatsVariants.filter(seat => seat.title === type);\r\n        return seat.price;\r\n    }\r\n\r\n    getTotalTicketPrice(tickets) {\r\n        let total = 0;\r\n\r\n        tickets.forEach(ticket => {\r\n            total += this.getPriceOfSeat(ticket.type);\r\n        });\r\n\r\n        return total;\r\n    }\r\n\r\n    getPriceBySize(size) {\r\n        return (size === \"M\") ? 30 : (size === \"L\") ? 40 : 0;\r\n    }\r\n\r\n    getTotalProductsPrice(products) {\r\n        let total = 0;\r\n\r\n        [...products].forEach(product => {\r\n            total += (product.price + this.getPriceBySize(product.size)) * product.count;\r\n        });\r\n\r\n        return total;\r\n    }\r\n\r\n    getTotalCount(tickets, products) {\r\n        return this.getTotalTicketPrice(tickets) + this.getTotalProductsPrice(products);\r\n    }\r\n\r\n    changeTab() {\r\n        let tab = this.props.currentTab;\r\n        this.props.openTab(tab + 1);\r\n    }\r\n\r\n    deleteTicket(e) {\r\n        const id = e.currentTarget.dataset.idrow;\r\n        const tickets = this.props.tickets;\r\n        tickets.splice(id, 1);\r\n        this.props.updateTickets(tickets);\r\n    }\r\n\r\n    deleteProduct(e) {\r\n        const id = e.currentTarget.dataset.idrow;\r\n        const products = this.props.products;\r\n        products.delete([...this.props.products][id]);\r\n\r\n        this.props.updateProducts(products);\r\n    }\r\n\r\n    getTicketsList(tickets) {\r\n        return tickets.map((ticket, index) => (\r\n            <tr className=\"tickets-table__row\" key={index}>\r\n                <td className=\"tickets-table__col\">{this.getTypeOfSeat(ticket.type)}</td>\r\n                <td className=\"tickets-table__col\">{ticket.row}</td>\r\n                <td className=\"tickets-table__col\">{ticket.seat}</td>\r\n                <td className=\"tickets-table__col\">{this.fullDate}</td>\r\n                <td className=\"tickets-table__col\">{this.time}</td>\r\n                <td className=\"tickets-table__col\">{this.getPriceOfSeat(ticket.type)}</td>\r\n                <td className=\"tickets-table__col\">\r\n                    <button className=\"tickets-table__button\" data-idrow={index} onClick={this.deleteTicket.bind(this)}>\r\n                        <Exit className=\"table-delete\" />\r\n                    </button>\r\n                </td>\r\n            </tr>\r\n        ));\r\n    }\r\n\r\n    getProductsList(products) {\r\n        return [...products].map((product, index) => (\r\n            <tr className=\"market-table__row\" key={index}>\r\n                <td className=\"market-table__col\"><img src={product.img} alt=\"img\" className=\"market-img\" /> </td>\r\n                <td className=\"market-table__col\">{product.title}</td>\r\n                <td className=\"market-table__col\">{product.count}</td>\r\n                <td className=\"market-table__col\">{product.size}</td>\r\n                <td className=\"market-table__col\">{product.price}</td>\r\n                <td className=\"market-table__col\">\r\n                    <button className=\"market-table__button\" data-idrow={index} onClick={this.deleteProduct.bind(this)}>\r\n                        <Exit className=\"table-delete\" />\r\n                    </button>\r\n                </td>\r\n            </tr>\r\n        ));\r\n    }\r\n    render() {\r\n\r\n\r\n        return (\r\n\r\n            <section className={\"pop-up-store\" + (this.props.show ? \" pop-up-store--show\" : \"\")\r\n                + (this.state.isResized ? \" pop-up-store--resize\" : \"\") + (this.props.currentTab === 3 ? \" pop-up-store--open\" : \"\")}>\r\n                <div className={\"pop-up-store__content\" + (this.state.isResized ? \" pop-up-store__content--show\" : \"\")}>\r\n                    <button className=\"pop-up-store__button\" onClick={this.resizeModal.bind(this)}>\r\n                        <Exit className=\"modal-exit\" />\r\n                    </button>\r\n                    <div className={\"pop-up-store__title\"}>Ваше замовлення</div>\r\n                    <section className=\"pop-up-store__tickets tickets-sect\">\r\n                        <div className=\"tickets-sect__top\">\r\n                            <div className=\"tickets-sect__title\">Квитки</div>\r\n                            <div className=\"tickets-sect__price\">{this.props.tickets.length}шт, {this.getTotalTicketPrice(this.props.tickets)}грн</div>\r\n                        </div>\r\n                        <table className=\"tickets-sect__table tickets-table\">\r\n                            <thead className=\"tickets-table__thead\">\r\n                                <tr className=\"tickets-table__thead-row\">\r\n                                    <th className=\"tickets-table__thead-col\">Тип</th>\r\n                                    <th className=\"tickets-table__thead-col\">Ряд</th>\r\n                                    <th className=\"tickets-table__thead-col\">Місце</th>\r\n                                    <th className=\"tickets-table__thead-col\">Дата</th>\r\n                                    <th className=\"tickets-table__thead-col\">Час</th>\r\n                                    <th className=\"tickets-table__thead-col\">Вартість</th>\r\n                                    <th className=\"tickets-table__thead-col\"></th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody className=\"tickets-table__rows\">\r\n                                {this.getTicketsList(this.props.tickets)}\r\n                            </tbody>\r\n                        </table>\r\n                    </section>\r\n                    <section className=\"pop-up-store__tickets market-sect\">\r\n                        <div className=\"market-sect__top\">\r\n                            <div className=\"market-sect__title\">Кіномаркет</div>\r\n                            <div className=\"market-sect__price\">{this.props.products.size || 0}шт, {this.getTotalProductsPrice(this.props.products)}грн</div>\r\n                        </div>\r\n                        <table className=\"market-sect__table market-table\">\r\n                            <thead className=\"market-table__thead\">\r\n                                <tr className=\"tickets-table__thead-row\">\r\n                                    <th className=\"market-table__thead-col\">Зображення</th>\r\n                                    <th className=\"market-table__thead-col\">Назва</th>\r\n                                    <th className=\"market-table__thead-col\">Кількість</th>\r\n                                    <th className=\"market-table__thead-col\">Обєм</th>\r\n                                    <th className=\"market-table__thead-col\">Вартість</th>\r\n                                    <th className=\"market-table__thead-col\"></th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody className=\"market-table__rows\">\r\n                                {this.getProductsList(this.props.products)}\r\n                            </tbody>\r\n                        </table>\r\n                    </section>\r\n                </div>\r\n                <div className=\"pop-up-store__bottom\">\r\n                    <button className={\"pop-up-store__resize-button\" +\r\n                        (!this.state.isResized) ? \" pop-up-store__resize-button--show\" : \"\"} onClick={this.resizeModal.bind(this)}>\r\n                        <NextStep class=\"pop-arrow-up\" />\r\n                    </button>\r\n                    <div className=\"pop-up-store__general-price\">Всього: {this.getTotalCount(this.props.tickets, this.props.products)} грн</div>\r\n                    <div className={\"pop-up-store__count\" + (!this.state.isResized ? \" pop-up-store__count--show\" : \"\")}>Квитки: {this.props.tickets.length}x</div>\r\n                    <div className={\"pop-up-store__count\" + (!this.state.isResized ? \" pop-up-store__count--show\" : \"\")}>Кіномаркет: {[...this.props.products].length}x</div>\r\n                    <button className=\"button-next\" type=\"submit\" onClick={this.changeTab.bind(this)}>\r\n                        <span className=\"button-text\">Продовжити</span>\r\n                        <NextStep />\r\n                    </button>\r\n                </div>\r\n            </section>\r\n        );\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}