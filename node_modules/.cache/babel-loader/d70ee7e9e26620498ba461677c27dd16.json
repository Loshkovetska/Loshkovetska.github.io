{"ast":null,"code":"import _slicedToArray from\"C:/Users/ddima/OneDrive/\\u0420\\u0430\\u0431\\u043E\\u0447\\u0438\\u0439 \\u0441\\u0442\\u043E\\u043B/portfolio/cinema-park/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import comments from\"../../mockData/comments\";import\"./Comments.scss\";import{users}from\"../../mockData/users\";import{Heart}from\"../Svg/Svg\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var user=[\"\",false];export default function Comments(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),comment=_useState2[0],setComment=_useState2[1];var _useState3=useState(comments.length),_useState4=_slicedToArray(_useState3,2),countComments=_useState4[0],setCount=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),likes=_useState6[0],setLikes=_useState6[1];function onChangeHadler(e){setComment(e.target.value);}function addComment(){var _users$filter=users.filter(function(user){return user.email.includes(localStorage.getItem(\"user\"));}),_users$filter2=_slicedToArray(_users$filter,1),userStorage=_users$filter2[0];if(!userStorage){alert(\"Залишити коментар можливо лише після авторизації!\");return;}comments.push({author:userStorage.name,text:comment,countLikes:0,date:new Date().toLocaleDateString('ru-RU')});setCount(comments.length);}function putLike(e){var _users$filter3=users.filter(function(user){return user.email.includes(localStorage.getItem(\"user\"));}),_users$filter4=_slicedToArray(_users$filter3,1),userStorage=_users$filter4[0];if(!userStorage){alert(\"Оцінити коментар можливо лише після авторизації!\");return;}var ind=+e.currentTarget.dataset.id;if(+comments[ind].countLikes>0&&user[1]){comments[ind].countLikes=+comments[ind].countLikes-1;user[0]=\"\";user[1]=false;}else if(!user[1]){comments[ind].countLikes=+comments[ind].countLikes+1;user[0]=userStorage.user;user[1]=true;}setLikes(comments[ind].countLikes);}function getComment(author,date,text,countLikes,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"comment\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"comment__top\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"comment__author\",children:author}),/*#__PURE__*/_jsx(\"div\",{className:\"comment__date\",children:date})]}),/*#__PURE__*/_jsx(\"p\",{className:\"comment__text\",children:text}),/*#__PURE__*/_jsxs(\"div\",{className:\"comment__bottom\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:putLike,className:\"button button--like\",\"data-id\":index,children:/*#__PURE__*/_jsx(Heart,{className:\"heart-svg\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"comment__likes\",children:countLikes})]})]},index);}return/*#__PURE__*/_jsx(\"div\",{className:\"comments\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"comments__container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"comments__count\",children:[\"\\u041A\\u043E\\u043C\\u0435\\u043D\\u0442\\u0430\\u0440\\u0456 (\",countComments,\")\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"comments__input\",children:[/*#__PURE__*/_jsx(\"textarea\",{required:true,className:\"input input--comment\",onChange:onChangeHadler,placeholder:\"\\u041D\\u0430\\u043F\\u0438\\u0448\\u0456\\u0442\\u044C \\u0441\\u0432\\u043E\\u0457 \\u0432\\u0440\\u0430\\u0436\\u0435\\u043D\\u043D\\u044F \\u0432\\u0456\\u0434  \\u043F\\u0435\\u0440\\u0435\\u0433\\u043B\\u044F\\u0434\\u0443 \\u0444\\u0456\\u043B\\u044C\\u043C\\u0443\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button button--comment\",onClick:addComment,children:\"\\u0412\\u0456\\u0434\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u0438\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"comments__output\",children:/*#__PURE__*/_jsx(\"div\",{className:\"comments__old\",children:comments.map(function(comment,index){return getComment(comment.author,comment.date,comment.text,comment.countLikes,index);})})})]})});}","map":{"version":3,"sources":["C:/Users/ddima/OneDrive/Рабочий стол/portfolio/cinema-park/src/components/Comments/Comments.js"],"names":["React","useState","comments","users","Heart","user","Comments","comment","setComment","length","countComments","setCount","likes","setLikes","onChangeHadler","e","target","value","addComment","filter","email","includes","localStorage","getItem","userStorage","alert","push","author","name","text","countLikes","date","Date","toLocaleDateString","putLike","ind","currentTarget","dataset","id","getComment","index","map"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport comments from \"../../mockData/comments\";\r\nimport \"./Comments.scss\";\r\nimport { users } from \"../../mockData/users\";\r\nimport { Heart } from \"../Svg/Svg\";\r\n\r\nconst user = [\"\", false];\r\nexport default function Comments() {\r\n    const [comment, setComment] = useState();\r\n    const [countComments, setCount] = useState(comments.length);\r\n    const [likes, setLikes] = useState(0);\r\n\r\n    function onChangeHadler(e) {\r\n        setComment(e.target.value);\r\n    }\r\n\r\n    function addComment() {\r\n        const [userStorage] = users.filter(user => user.email.includes(localStorage.getItem(\"user\")));\r\n\r\n        if (!userStorage) {\r\n            alert(\"Залишити коментар можливо лише після авторизації!\");\r\n            return;\r\n        }\r\n\r\n        comments.push(\r\n            {\r\n                author: userStorage.name,\r\n                text: comment,\r\n                countLikes: 0,\r\n                date: new Date().toLocaleDateString('ru-RU')\r\n            }\r\n        );\r\n\r\n        setCount(comments.length);\r\n    }\r\n\r\n    function putLike(e) {\r\n        const [userStorage] = users.filter(user => user.email.includes(localStorage.getItem(\"user\")));\r\n\r\n        if (!userStorage) {\r\n            alert(\"Оцінити коментар можливо лише після авторизації!\");\r\n            return;\r\n        }\r\n\r\n        let ind = +e.currentTarget.dataset.id;\r\n\r\n        if (+comments[ind].countLikes > 0 && user[1]) {\r\n            comments[ind].countLikes = +comments[ind].countLikes - 1;\r\n            user[0] = \"\";\r\n            user[1] = false;\r\n        }\r\n        else if (!user[1]) {\r\n            comments[ind].countLikes = +comments[ind].countLikes + 1;\r\n            user[0] = userStorage.user;\r\n            user[1] = true;\r\n        }\r\n\r\n        setLikes(comments[ind].countLikes);\r\n\r\n    }\r\n\r\n    function getComment(author, date, text, countLikes, index) {\r\n        return (\r\n            <div className=\"comment\" key={index}>\r\n                <div className=\"comment__top\">\r\n                    <div className=\"comment__author\">{author}</div>\r\n                    <div className=\"comment__date\">{date}</div>\r\n                </div>\r\n                <p className=\"comment__text\">{text}</p>\r\n                <div className=\"comment__bottom\">\r\n                    <button onClick={putLike} className=\"button button--like\" data-id={index}>\r\n                        <Heart className=\"heart-svg\" />\r\n                    </button>\r\n                    <span className=\"comment__likes\">{countLikes}</span>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"comments\">\r\n            <div className=\"comments__container\">\r\n                <div className=\"comments__count\">Коментарі ({countComments})</div>\r\n                <div className=\"comments__input\">\r\n                    <textarea required className=\"input input--comment\" onChange={onChangeHadler}\r\n                        placeholder=\"Напишіть свої враження від  перегляду фільму\" />\r\n                    <button className=\"button button--comment\" onClick={addComment}>Відправити</button>\r\n                </div>\r\n                <div className=\"comments__output\">\r\n                    <div className=\"comments__old\">\r\n                        {\r\n                            comments.map((comment, index) => getComment(comment.author, comment.date, comment.text, comment.countLikes, index))\r\n                        }\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}